{
	"version": "2.0.0",
	"tasks": [
		{
            "label": "Compile Project",
            "type": "shell",
            "command": "${command:raspberry-pi-pico.getWestPath}",
            "args":  [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=${command:raspberry-pi-pico.getOpenOCDRoot}/openocd.exe",
				"-DOPENOCD_DEFAULT_PATH=${command:raspberry-pi-pico.getOpenOCDRoot}/scripts"
			],
            "group": {
				"kind": "build"
			},
			"options": {
				"env": {
					"ZEPHYR_BASE": "${command:raspberry-pi-pico.getOpenOCDRoot}/../zephyr_workspace/zephyr",
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            },
            "problemMatcher": "$gcc",
        },
		{
			"label": "Zephyr Build RP2040",
			"type": "shell",
			"group": {
				"kind": "build"
			},
			"options": {
				"env": {
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe"
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"args": [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=\"${userHome}\"/.pico-sdk/openocd/0.12.0+dev/openocd.exe",
				"-DOPENOCD_DEFAULT_PATH=\"${userHome}\"/.pico-sdk/openocd/0.12.0+dev/scripts"
			],
			"problemMatcher": [
				"$gcc"
			]
		},
		{
			"label": "Zephyr Build RP2040_W",
			"type": "shell",
			"group": {
				"kind": "build"
			},
			"options": {
				"env": {
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe"
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"args": [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico/rp2040/w",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=\"${userHome}\"/.pico-sdk/openocd/0.12.0+dev/openocd.exe",
				"-DOPENOCD_DEFAULT_PATH=\"${userHome}\"/.pico-sdk/openocd/0.12.0+dev/scripts"
			],
			"problemMatcher": [
				"$gcc"
			]
		},
        {
			"label": "Zephyr Build RP2350",
			"type": "shell",
			"group": {
				"kind": "build"
			},			
			"options": {
				"env": {
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe"
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/Scripts/west"
			},
			"args": [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico2/rp2350a/m33",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=\"${userHome}\"/.pico-sdk/openocd/0.12.0+dev/openocd.exe",
				"-DOPENOCD_DEFAULT_PATH=\"${userHome}\"/.pico-sdk/openocd/0.12.0+dev/scripts"
			],
			"problemMatcher": [
				"$gcc"
			]
		},
		{
			"label": "Zephyr Flash",
			"type": "shell",
			"group": {
				"kind": "build"
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe"
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"args": [
				"flash"
			]
		}
	],
	"inputs": [
	{
		"id": "application",
		"type": "promptString",
		"description": "Application to build, e.g app",
		"default": "app"
	},
	{
		"id": "usb_serial_port",
		"type": "pickString",
		"description": "Select whether to use the UART serial port or the USB serial port",
		"default": "",
		"options": [
			{"label": "UART", "value": ""},
			{"label": "USB", "value": "-S usb_serial_port"}
      ],
	}
  ]
}