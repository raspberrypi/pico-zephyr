{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Zephyr Build RP2040",
			"type": "shell",
			"group": {
				"kind": "build"
			},
			"options": {
				"env": {
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe",
				"args": [
					"build",
					"-p",
					"auto",
					"-b",
					"rpi_pico",
					"${input:application}",
					"${input:usb_serial_port}",
					"--",
					"-DOPENOCD=${input:openocd_install_dir}/openocd.exe",
					"-DOPENOCD_DEFAULT_PATH=${input:openocd_install_dir}/scripts"
				],
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"args": [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=${input:openocd_install_dir}/src/openocd",
				"-DOPENOCD_DEFAULT_PATH=${input:openocd_install_dir}/tcl"
			],
			"problemMatcher": [
				"$gcc"
			]
		},
		{
			"label": "Zephyr Build RP2040_W",
			"type": "shell",
			"group": {
				"kind": "build"
			},
			"options": {
				"env": {
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe",
				"args": [
					"build",
					"-p",
					"auto",
					"-b",
					"rpi_pico/rp2040/w",
					"${input:application}",
					"${input:usb_serial_port}",
					"--",
					"-DOPENOCD=${input:openocd_install_dir}/openocd.exe",
					"-DOPENOCD_DEFAULT_PATH=${input:openocd_install_dir}/scripts"
				],
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"args": [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico/rp2040/w",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=${input:openocd_install_dir}/src/openocd",
				"-DOPENOCD_DEFAULT_PATH=${input:openocd_install_dir}/tcl"
			],
			"problemMatcher": [
				"$gcc"
			]
		},
        {
			"label": "Zephyr Build RP2350",
			"type": "shell",
			"group": {
				"kind": "build"
			},			
			"options": {
				"env": {
					"SNIPPET_ROOT": "${workspaceFolder}"
				}
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe",
				"args": [
					"build",
					"-p",
					"auto",
					"-b",
					"rpi_pico2/rp2350a/m33",
					"${input:application}",
					"${input:usb_serial_port}",
					"--",
					"-DOPENOCD=${input:openocd_install_dir}/openocd.exe",
					"-DOPENOCD_DEFAULT_PATH=${input:openocd_install_dir}/scripts"
				],
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/Scripts/west"
			},
			"args": [
				"build",
				"-p",
				"auto",
				"-b",
				"rpi_pico2/rp2350a/m33",
                "${input:application}",
				"${input:usb_serial_port}",
				"--",
				"-DOPENOCD=${input:openocd_install_dir}/src/openocd",
				"-DOPENOCD_DEFAULT_PATH=${input:openocd_install_dir}/tcl"
			],
			"problemMatcher": [
				"$gcc"
			]
		},
		{
			"label": "Zephyr Flash",
			"type": "shell",
			"group": {
				"kind": "build"
			},
			"linux": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"windows": {
				"command": "\"${workspaceFolder}\"/.venv/Scripts/west.exe"
			},
			"osx": {
				"command": "${workspaceFolder}/.venv/bin/west"
			},
			"args": [
				"flash"
			]
		}
	],
	"inputs": [
	{
		"id": "application",
		"type": "promptString",
		"description": "Application to build, e.g app",
		"default": "app"
		},
    {
      "id": "openocd_install_dir",
      "type": "promptString",
      "description": "Top level openocd install directory, e.g /home/openocd",
	  "default": "${workspaceFolder}/../openocd"
    },
	{
		"id": "usb_serial_port",
		"type": "pickString",
		"description": "Select whether to use the UART serial port or the USB serial port",
		"default": "",
		"options": [
			{"label": "UART", "value": ""},
			{"label": "USB", "value": "-S usb_serial_port"}
      ],
	}
  ]
}